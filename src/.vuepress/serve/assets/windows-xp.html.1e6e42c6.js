import{_ as o}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,o as l,c,a as s,b as t,d as n,e}from"./app.e6600fbb.js";const i={},r=s("p",null,[s("em",null,"Most of this document also applies to Windows 2000.")],-1),u=n("You can download Windows 2000 from "),d={href:"https://winworldpc.com/download/413638c2-8d18-c39a-11c3-a4e284a2c3a5",target:"_blank",rel:"noopener noreferrer"},k=n("WinWorld"),_=n("."),m=e(`<p>Use QEMU to create <code>winxp.img</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>qemu-img create winxp.img 2G
qemu-system-x86_64 -m 512 -drive file=winxp.img,format=raw -cdrom en_windows_xp_professional_with_service_pack_3_x86_cd_vl_x14-73974.iso
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Follow setup instructions.</p><p>The next step fixes <code>Uncaught RangeError: Maximum call stack size exceeded</code> in Chrome during Windows 2000/XP boot in v86.</p>`,4),h=n('After installation change computer type to "Standard PC" as described '),v={href:"http://web.archive.org/web/20220528021535/https://www.scm-pc-card.de/file/manual/FAQ/acpi_uninstallation_windows_xp_english.pdf",target:"_blank",rel:"noopener noreferrer"},g=n("here"),b=n(`: Start > RightClick "My Computer" > Manage > Device Manager > Computer > RightClick "ACPI Uniprocessor PC" > Update Driver... > No, not this time > Next > Install from a list or specific location (Advanced) > Next > Don't search. I will choose the driver to install. > Next > Standard PC > Next > Finish. Restart the VM, follow multiple "Found New Hardware Wizard" dialogs with default options.`),w=n("Now "),f=s("code",null,"winxp.img",-1),y=n(" is ready for v86. You can use "),x={href:"https://copy.sh/v86/",target:"_blank",rel:"noopener noreferrer"},q=n("the website"),N=n(" to run it: Specify "),C=s("code",null,"winxp.img",-1),P=n(" as a hard drive and optionally set memory size to 512 MB. Or run it in a custom html file as described below."),T=n("Get seabios.bin and vgabios.bin from "),M={href:"https://github.com/copy/v86/tree/master/bios",target:"_blank",rel:"noopener noreferrer"},S=n("here"),W=n(", get libv86.js and v86.wasm from "),V={href:"https://github.com/copy/v86/releases/tag/latest",target:"_blank",rel:"noopener noreferrer"},z=n("releases"),D=n(". Create "),E=s("code",null,"winxp.htm",-1),I=n(" with this content (assuming all the files are in the same folder):"),U=e(`<div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>libv86.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">V86Starter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">wasm_path</span><span class="token operator">:</span> <span class="token string">&quot;v86.wasm&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bios</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;seabios.bin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vga_bios</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;vgabios.bin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hda</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;winxp.img&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            <span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">memory_size</span><span class="token operator">:</span> <span class="token number">512</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
        <span class="token literal-property property">screen_container</span><span class="token operator">:</span> screen_container<span class="token punctuation">,</span>
        <span class="token literal-property property">autostart</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>screen_container</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">white-space</span><span class="token punctuation">:</span> pre<span class="token punctuation">;</span> <span class="token property">font</span><span class="token punctuation">:</span> 14px monospace</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),j=n("To open this html file locally a HTTP server is needed. The standard Python server "),A=s("code",null,"python -m http.server",-1),B=n(" doesn't support HTTP range requests. You can use "),F={href:"https://www.npmjs.com/package/http-server",target:"_blank",rel:"noopener noreferrer"},R=n("http-server"),X=n(" or "),H={href:"https://github.com/cortesi/devd",target:"_blank",rel:"noopener noreferrer"},Y=n("devd"),G=n(". Start the server (from the same folder as "),L=s("code",null,"winxp.htm",-1),O=n("):"),Q=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,`npx http-server
`)]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),J=n("Open "),K={href:"http://localhost:8080/winxp.htm",target:"_blank",rel:"noopener noreferrer"},Z=n("http://localhost:8080/winxp.htm"),$=n(" in the browser."),ss=s("p",null,"Windows XP load time (until start button becomes responsive) in Chromium on my computer:",-1),ns=s("ul",null,[s("li",null,"3 min second time"),s("li",null,"4 min (first time or if cache is disabled)"),s("li",null,"12 min second time if Network tab in Developer Tools is open"),s("li",null,"17 min (first time or if cache is disabled) and Network tab in Developer Tools is open")],-1),as=s("p",null,"Sometimes Windows XP hangs after boot (before it is interactive) in v86, displaying only desktop wallpaper without taskbar or desktop icons.",-1);function ts(es,os){const a=p("ExternalLinkIcon");return l(),c("div",null,[r,s("p",null,[u,s("a",d,[k,t(a)]),_]),m,s("p",null,[h,s("a",v,[g,t(a)]),b]),s("p",null,[w,f,y,s("a",x,[q,t(a)]),N,C,P]),s("p",null,[T,s("a",M,[S,t(a)]),W,s("a",V,[z,t(a)]),D,E,I]),U,s("p",null,[j,A,B,s("a",F,[R,t(a)]),X,s("a",H,[Y,t(a)]),G,L,O]),Q,s("p",null,[J,s("a",K,[Z,t(a)]),$]),ss,ns,as])}var cs=o(i,[["render",ts],["__file","windows-xp.html.vue"]]);export{cs as default};
